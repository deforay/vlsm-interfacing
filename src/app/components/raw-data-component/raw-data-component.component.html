<!-- raw-data-component.component.html - Modern Design -->
<div class="raw-data-container">
  <!-- Header Section -->
  <div class="header-section">
    <h2 class="page-title">Raw Data</h2>
    <button (click)="click()" class="btn btn-primary">
      <i class="fa fa-tachometer-alt"></i>
      <span>Console</span>
    </button>
  </div>

  <!-- Search Section -->
  <div class="search-section">
    <div class="search-container">
      <i class="fa fa-search search-icon"></i>
      <input
        type="text"
        (keyup)="filterData($event)"
        placeholder="Search raw data records..."
        class="search-input"
      >
    </div>
  </div>

  <!-- Data Table -->
  <div class="table-container">
    <mat-table #table [dataSource]="dataSource" matSort class="data-table">
      <!-- Machine Column -->
      <ng-container matColumnDef="machine">
        <mat-header-cell *matHeaderCellDef mat-sort-header class="column-machine">Machine</mat-header-cell>
        <mat-cell *matCellDef="let row" class="column-machine">{{row.machine}}</mat-cell>
      </ng-container>

      <!-- Added On Column -->
      <ng-container matColumnDef="added_on">
        <mat-header-cell *matHeaderCellDef mat-sort-header class="column-added-on">Added On</mat-header-cell>
        <mat-cell *matCellDef="let row" class="column-added-on">{{row.added_on}}</mat-cell>
      </ng-container>

      <!-- Data Column -->
      <ng-container matColumnDef="data">
        <mat-header-cell *matHeaderCellDef mat-sort-header class="column-data">Data</mat-header-cell>
        <mat-cell *matCellDef="let row" class="column-data">
          <div class="data-preview-container" [ngClass]="{'expanded': row.expanded}">
            <div class="data-preview" *ngIf="!row.expanded">
              <span class="data-preview-text">{{ row.data | slice:0:50 }}</span>
              <button class="btn-expand-toggle" (click)="toggleRow(row); $event.stopPropagation()">
                See more
                <i class="fa fa-chevron-down"></i>
              </button>
            </div>
            <div class="data-expanded" *ngIf="row.expanded">
              <!-- Using the pre tag to preserve formatting -->
              <pre class="data-content">{{ row.data }}</pre>
              <button class="btn-expand-toggle" (click)="toggleRow(row); $event.stopPropagation()">
                See less
                <i class="fa fa-chevron-up"></i>
              </button>
            </div>
          </div>
        </mat-cell>
      </ng-container>

      <!-- Header and Row Definitions -->
      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
      <mat-row
        *matRowDef="let row; columns: displayedColumns;"
        [ngClass]="{'expanded-row': row.expanded}"
        (click)="row.expanded = !row.expanded"
      ></mat-row>
    </mat-table>

    <!-- Empty State -->
    <div *ngIf="dataSource.data.length === 0" class="empty-state">
      <i class="fa fa-database"></i>
      <p>No data found</p>
      <small>Try adjusting your search criteria</small>
    </div>

    <!-- Pagination -->
    <mat-paginator
      [pageSizeOptions]="[50, 100, 250, 500]"
      [pageSize]="100"
      showFirstLastButtons
      aria-label="Select Page">
    </mat-paginator>
  </div>
</div>
